---
clusterapi_cluster_become: false

clusterapi_cluster_uid: "{{ ansible_facts.user_uid | string }}"
clusterapi_cluster_gid: "{{ ansible_facts.user_gid | string }}"

clusterapi_cluster_kind_cluster_name: "{{ kind_cluster_name | default('clusterapi') }}"

clusterapi_cluster_kubeconfig: kubeconfig
clusterapi_cluster_name: garden
clusterapi_cluster_state: present

clusterapi_cluster_external_network: public
clusterapi_cluster_ssh_key_name: "{{ clusterapi_cluster_name }}"

clusterapi_cluster_container_registry_cache_dockerhub: https://registry.osism.tech/v2/dockerhub
clusterapi_cluster_container_registry_cache_ghcr: https://registry.osism.tech/v2/ghcr
clusterapi_cluster_container_registry_cache_k8s: https://registry.osism.tech/v2/k8s

clusterapi_cluster_charts_dir: "{{ playbook_dir }}/charts/"

clusterapi_cluster_kubernetes_version: "v1.33.5"

clusterapi_cluster_openstack_auth_url: ""
clusterapi_cluster_openstack_application_credential_id: ""
clusterapi_cluster_openstack_application_credential_secret: ""
clusterapi_cluster_openstack_domain_name: ""
clusterapi_cluster_openstack_region_name: ""
clusterapi_cluster_openstack_swift_image_url:  https://swift.example.com/swift/v1/AUTH_cda7bdba271d27a9499900be9319984f/openstack-k8s-capi-images/ubuntu-2404-kube-1.33/ubuntu-2404-kube-v1.33.4.qcow2
clusterapi_cluster_openstack_upload_image: false
clusterapi_cluster_openstack_image_id: "fe820408-b646-46bb-8988-1d889723987"
clusterapi_cluster_cloud_cacert_b64: ""
clusterapi_cluster_openstack_cloud:
  auth:
    auth_url: "{{ clusterapi_cluster_openstack_auth_url }}"
    application_credential_id: "{{ clusterapi_cluster_openstack_application_credential_id }}"
    application_credential_secret: "{{ clusterapi_cluster_openstack_application_credential_secret }}"
  region_name: "{{ clusterapi_cluster_openstack_region_name }}"
  interface: "public"
  identity_api_version: 3
  auth_type: "v3applicationcredential"

clusterapi_cluster_defaults:
  CLUSTER_NAME: "{{ clusterapi_cluster_name }}"
  CONTROL_PLANE_MACHINE_COUNT: 3
  KUBERNETES_VERSION: "{{ clusterapi_cluster_kubernetes_version }}"
  OPENSTACK_CLOUD: openstack
  OPENSTACK_CLOUD_CACERT_B64: "{{ clusterapi_cluster_cloud_cacert_b64 }}"
  OPENSTACK_CLOUD_YAML_B64: "{{ _clusterapi_cluster_cloud_yaml_b64 | default('') }}"
  OPENSTACK_CONTROL_PLANE_MACHINE_FLAVOR: SCS-4V-8-50s
  OPENSTACK_DNS_NAMESERVERS: "1.1.1.1"
  OPENSTACK_EXTERNAL_NETWORK_ID: "{{ _clusterapi_cluster_external_network_id | default('') }}"
  OPENSTACK_FAILURE_DOMAIN: nova
  OPENSTACK_FLOATING_IP_POOL: "{{ clusterapi_cluster_external_network }}"
  OPENSTACK_IMAGE_ID: "{{ clusterapi_cluster_openstack_image_id }}"
  OPENSTACK_NODE_MACHINE_FLAVOR: SCS-4V-8-50s
  OPENSTACK_SSH_KEY_NAME: "{{ clusterapi_cluster_ssh_key_name }}"
  WORKER_MACHINE_COUNT: 3
  CONTAINER_REGISTRY_CACHE_DOCKERHUB: "{{ clusterapi_cluster_container_registry_cache_dockerhub }}"
  CONTAINER_REGISTRY_CACHE_GHCR: "{{ clusterapi_cluster_container_registry_cache_ghcr }}"
  CONTAINER_REGISTRY_CACHE_K8S: "{{ clusterapi_cluster_container_registry_cache_k8s }}"

clusterapi_cluster_csi_snapshotter_enable: false

clusterapi_cluster_extra: {}

# network

clusterapi_cluster_network: cilium

cilium_helm_chart_ref: /var/lib/yake/charts/cilium # noqa: var-naming[no-role-prefix]
cilium_helm_release_name: cilium # noqa: var-naming[no-role-prefix]
cilium_helm_release_namespace: kube-system # noqa: var-naming[no-role-prefix]
cilium_helm_values: # noqa: var-naming[no-role-prefix]
  policyCIDRMatchMode: nodes
